# Tetra Detector - FM Radio Calibratie
# Gebruik deze config om PPM offset te bepalen met een bekende FM frequentie

sdr:
  mode: single
  
  devices:
    - index: 0
      name: "P2000 Scanner"
      center_frequency: 169.65  # P2000 frequentie
      sample_rate: 2.4
      gain: auto
      ppm_correction: 0  # Start met 0, pas aan tot signaal precies klopt

detection:
  threshold: -50  # Base threshold (ignored if adaptive enabled)
  scan_interval: 1
  samples: 262144
  
  # Adaptive threshold detection
  adaptive:
    enabled: true              # Enable adaptive threshold
    noise_floor_window: 20     # Number of samples to calculate noise floor
    threshold_margin: 8        # dBm above noise floor to trigger detection

display:
  bar_width: 30
  power_range_min: -80
  power_range_max: -10  # FM is sterker, hogere max
  use_colors: true
  show_device_names: false

logging:
  enabled: false
  directory: ./logs
  filename_format: "p2000_%Y%m%d.log"
  level: INFO

# CALIBRATIE INSTRUCTIES:
# 1. Start detector met deze config
# 2. Met adaptive threshold enabled, wacht 5-10 scans tot noise floor is berekend
# 3. Systeem past automatisch threshold aan: noise floor + 8 dBm margin
# 4. Je ziet NF (noise floor) en Thr (threshold) in de output
# 5. Als je te veel/weinig detecties krijgt, pas threshold_margin aan:
#    - Meer margin = minder gevoelig (bijv. 10 dBm)
#    - Minder margin = gevoeliger (bijv. 5 dBm)
#
# ADAPTIVE THRESHOLD:
# - enabled: true/false - schakel adaptive detection in/uit
# - noise_floor_window: aantal samples voor noise floor berekening (20 = ~20 seconden)
# - threshold_margin: hoeveel dBm boven noise floor is een detectie